(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[22],{"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.jsx":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var t=s(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var i=s(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var o=s(r("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var l=s(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=s(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var p=s(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var u=s(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function m(a){var t=d();return function e(){var n=(0,p.default)(a),r;if(t){var s=(0,p.default)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var a=r("./src/main/webapp/universal/src/shared/i18n/index.ts"),v=a.t;var f=r("./common/temp/node_modules/prop-types/index.js");var h=r("./common/temp/node_modules/react/index.js");var b=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/stores/AvailablePlanPropTypes.js");var g=r("./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/index.jsx");var w=r("./common/temp/node_modules/@sqs/fields/lib/index.js"),C=w.Button;var j=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js"),P=j.Confirmation;var y=r("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/classnames/index.js");var x=r("./src/main/webapp/universal/src/shared/utils/billing/ProductLineUtils.js");var A=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.less");var S=r("./src/main/webapp/universal/src/apps/App/shared/components/billing/PurchasePreview/index.jsx");var _=r("./src/main/webapp/frontend/packages/universal-router/lib/index.js"),L=_.RouterPropType,k=_.withRouter;var R=r("./src/main/webapp/universal/src/apps/App/shared/actions/billing/PlanChangePreviewActions.js");var B=r("./src/main/webapp/universal/src/apps/App/shared/components/Receipt/utils/InvoicePropTypes.js");var I=r("./src/main/webapp/frontend/packages/enums/SubscriptionLineItemType.js");var N=function(e){(0,l.default)(a,e);var s=m(a);function a(){var l;(0,t.default)(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];l=s.call.apply(s,[this].concat(n));(0,u.default)((0,o.default)(l),"state",{showError:false,showSpinner:false});(0,u.default)((0,o.default)(l),"handleConfirm",function(){l.setState({showSpinner:true});l.props.onConfirm().then(function(){return document.location.href="/config"},function(){return l.setState({showSpinner:false,showError:true})})});(0,u.default)((0,o.default)(l),"getPlanChangeLabel",function(e){if(e.subscriptionDetail.lineItemType!==I.PRORATED_CHARGE&&e.subscriptionDetail.lineItemType!==I.PRORATED_REFUND)return null;var n=l.props.mode;var r=e.subscriptionDetail;var s=r.productLine,a=r.planName,t=r.periodName;var i=x.getLabelForProductLine(s);var o=i;i!==a&&(o+=" "+a);"billingPeriod"===n&&(o+=" - "+t);return o});(0,u.default)((0,o.default)(l),"getButtonLabel",function(){if("billingPeriod"===l.props.mode)return v("Confirm Cycle Change");return v("Confirm Plan Change")});(0,u.default)((0,o.default)(l),"getSpinnerLabel",function(){var e=l.props.mode;if("billingPeriod"===e)return v("Please wait a moment while your Squarespace billing cycle is changed…");return v("Please wait a moment while your Squarespace plan is changed…")});(0,u.default)((0,o.default)(l),"renderModals",function(){var e=l.state,n=e.showSpinner,r=e.showError;return h.createElement("div",null,h.createElement(g,{visible:n,subtext:l.getSpinnerLabel()}),h.createElement(P,{isOpen:r,onCancel:function e(){return l.setState({showError:false})},onConfirm:function e(){return l.props.router.push("/settings/billing/billing/payment-info")},title:v("Transaction Declined"),message:v("The transaction was declined. Please update your payment information and try again."),confirmText:v("Update Payment Info"),cancelText:v("Dismiss")}))});return l}(0,i.default)(a,[{key:"componentDidMount",value:function e(){R.emptyCache()}},{key:"render",value:function e(){var n=this.props,r=n.isVisible,s=n.previewInvoice,a=n.width;if(!r)return this.renderModals();return h.createElement("div",{className:y(A.container,(0,u.default)({},A.hidden,!r)),styles:{width:a}},h.createElement("div",{className:A.column},h.createElement("div",{className:A.subSummaryContainer},h.createElement(S,{previewInvoice:s,itemDescriptionOverride:this.getPlanChangeLabel}))),this.props.showConfirm&&h.createElement("div",{className:A.column},h.createElement("div",{className:A.confirmButtonContainer},h.createElement(C,{testId:"submit-plan-change-button",className:A.confirmButton,type:"primary",onClick:this.handleConfirm},this.getButtonLabel()))),this.renderModals())}}]);return a}(h.Component);(0,u.default)(N,"propTypes",{mode:f.oneOf(["billingPeriod","featureLevel"]),isVisible:f.bool,newPlan:b.plan,previewInvoice:B.invoice,onConfirm:f.func.isRequired,showConfirm:f.bool,width:f.number,router:L});(0,u.default)(N,"defaultProps",{onConfirm:function e(){false;return Promise.resolve()},showConfirm:true});e.exports=k(N)},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.less":function(e,n,r){e.exports={container:"_9F6warYGp",column:"_3lcKtJ1b8",confirmButtonContainer:"_1PWdG-V5H",subSummaryContainer:"_7zdkX31ar",confirmButton:"_3H0hdIpII"}},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/index.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/alt-utils/lib/connectToStores.js");var d=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/utils/setBillingChangeCookie.js");var a=r("./src/main/webapp/universal/src/apps/App/shared/stores/billing/AvailablePlansStore.js");var t=r("./src/main/webapp/universal/src/shared/actions/billing/CustomerActions.js");var v=r("./src/main/webapp/universal/src/shared/stores/billing/CustomerStore.js");var f=r("./src/main/webapp/universal/src/apps/App/shared/stores/billing/PlanChangePreviewStore.js");var h=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/stores/PlanSelectionStore.js");var b=r("./src/main/webapp/universal/src/apps/App/shared/actions/billing/SubscriptionActions.js");var g=r("./src/main/webapp/universal/src/apps/App/shared/stores/billing/SubscriptionStore.js");var i=r("./src/main/webapp/universal/src/apps/App/shared/stores/WebsiteStore/index.js");var o=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PlanChangeFooter/PlanChangeFooter.jsx");var w=r("./src/main/webapp/universal/src/apps/App/shared/actions/ProductLineTransitionActions.js");e.exports=s({getStores:function e(){return[a,v,f,h,i]},getPropsFromStores:function e(n){var r=v.getState(),s=r.cardNumber,a=r.customerBalance;var t=h.getState().plan;var i=f.getState(),o=i.invoice,l=i.isLoaded,c=i.isLoading;var p=t?t.id:null;var u=!("isVisible"in n&&!n.isVisible)&&null!==p&&l&&!c;var m=function e(){return g.getOrLoadWebsiteSubscription().then(function(e){var n=Object.assign({},e);Object.assign(e,{plan:t});var r=null;r=n.plan.productLine!==t.productLine?w.transition(t.productLine,{subscriptionId:e.id,featureLevel:t.featureLevel}):b.update(e);return r.then(function(){var e=g.getWebsiteSubscription();d(n,e)})})};return{cardNumber:s,customerBalance:a,isVisible:u,newPlan:t,onConfirm:m,previewInvoice:o}},componentDidConnect:function e(){var n=v.getState();n.loaded||n.loading||t.load.defer()}},o)},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.jsx":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var a=s(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var t=s(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=s(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var o=s(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var l=s(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));function c(a){var t=p();return function e(){var n=(0,l.default)(a),r;if(t){var s=(0,l.default)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,o.default)(this,r)}}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var u=r("./common/temp/node_modules/react/index.js");var m=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.less");var d=function(e){(0,i.default)(r,e);var n=c(r);function r(){(0,a.default)(this,r);return n.apply(this,arguments)}(0,t.default)(r,[{key:"render",value:function e(){return u.createElement("div",{className:m.container},this.props.children)}}]);return r}(u.Component);e.exports=d},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.less":function(e,n,r){e.exports={container:"_1W4H-Wm01"}},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/index.js":function(e,n,r){"use strict";e.exports=r("./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/components/PromotionalBanner/PromotionalBanner.jsx")},"./src/main/webapp/universal/src/apps/App/screens/Checkout/shared/utils/setBillingChangeCookie.js":function(e,n,r){"use strict";var s=function e(n,r){var s=n.plan;var a=r.plan;var t={newSub:false,planChange:s.featureLevel!==a.featureLevel,prevPlanName:s.planDisplayName,newPlanName:a.planDisplayName,prevPeriodName:s.periodDisplayName,newPeriodName:a.periodDisplayName,nextBillDate:r.renewalDate,productLineChange:s.productLine!==a.productLine,prevProductLine:s.productLine,newProductLine:a.productLine};document.cookie="billingChangeSummary=".concat(JSON.stringify(t))};e.exports=s},"./src/main/webapp/universal/src/apps/App/shared/actions/ProductLineTransitionActions.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var a=s(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var t=s(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=r("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=r("./src/main/webapp/universal/src/apps/App/shared/utils/ProductLineTransitionAPI.js");var l=function(){function e(){(0,a.default)(this,e);this.generateActions("loadSuccess","loadFail")}(0,t.default)(e,[{key:"transition",value:function e(n,r){var s=this;r&&0!==Object.keys(r).length||(r={});var a=o.transition(n,r);a.then(function(e){s.loadSuccess(e.data.results)}).catch(function(e){console.error(e);s.loadFail(e)});return a}}]);return e}();e.exports=i.createActions(l)},"./src/main/webapp/universal/src/apps/App/shared/actions/billing/PlanChangePreviewActions.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var a=s(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var t=s(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=r("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=r("./src/main/webapp/universal/src/apps/App/shared/utils/billing/PlanChangePreviewApi.js");var l={};var c=function(){function e(){(0,a.default)(this,e);this.generateActions("loadSuccess","loadFail","reset")}(0,t.default)(e,[{key:"load",value:function e(r,s){var a=this;return function(e){e({planId:r});var n=null;n=l[r]?Promise.resolve(l[r]):o.load({planId:r,productType:s});return n.then(function(e){l[r]||(l[r]=e);a.loadSuccess(Object.assign({planId:r},e.data))}).catch(function(e){console.error(e);a.loadFail()})}}},{key:"emptyCache",value:function e(){return function(e){l={}}}}]);return e}();e.exports=i.createActions(c)},"./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/BigSpinner.less":function(e,n,r){e.exports={spinner:"_3UKwJtNKS lL8XXJLd4",subtext:"_3hZZJJDhI",overlay:"_1nwS8is2r",overlayContainer:"ceHMjMo6G"}},"./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/index.jsx":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var i=s(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var o=s(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var l=s(r("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var c=s(r("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var p=s(r("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=s(r("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var m=s(r("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function d(a){var t=v();return function e(){var n=(0,u.default)(a),r;if(t){var s=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}r("./src/main/webapp/universal/src/shared/i18n/configurations/universal-ui.js");var a=r("./common/temp/node_modules/prop-types/index.js");var f=r("./common/temp/node_modules/react/index.js");var h=r("./src/main/webapp/universal/src/apps/App/shared/components/BigSpinner/BigSpinner.less");var t=r("./src/main/webapp/frontend/packages/universal-ui/cjs/index.js"),b=t.Modal;var g=function(e){(0,c.default)(t,e);var a=d(t);function t(){var n;(0,i.default)(this,t);for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];n=a.call.apply(a,[this].concat(r));(0,m.default)((0,l.default)(n),"renderSubtext",function(){var e=n.props.subtext;if(e)return f.createElement("div",{className:h.subtext},e);return""});return n}(0,o.default)(t,[{key:"render",value:function e(){return f.createElement(b,{isOpen:this.props.visible,overlayClassName:h.overlay,className:h.overlayContainer,width:"auto"},f.createElement("div",{className:h.spinner}," "),this.renderSubtext())}}]);return t}(f.Component);(0,m.default)(g,"propTypes",{visible:a.bool,subtext:a.string});(0,m.default)(g,"defaultProps",{subtext:"",visible:false});e.exports=g},"./src/main/webapp/universal/src/apps/App/shared/stores/billing/PlanChangePreviewStore.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var a=s(r("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var t=s(r("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=r("./src/main/webapp/universal/src/shared/dispatchers/alt/index.ts");var o=r("./src/main/webapp/universal/src/apps/App/shared/actions/billing/PlanChangePreviewActions.js");var l=function(){function e(){(0,a.default)(this,e);this.isLoaded=false;this.isLoading=false;this.amount=null;this.violations=[];this.planId=null;this.bindActions(o)}(0,t.default)(e,[{key:"onLoad",value:function e(n){var r=n.planId;this.setState({isLoading:true,planId:r})}},{key:"onLoadSuccess",value:function e(n){if(n.planId!==this.planId)return false;this.setState({isLoaded:true,isLoading:false,invoice:n.invoice})}},{key:"onLoadFail",value:function e(){this.setState({isLoading:false})}},{key:"onReset",value:function e(){this.setState({amount:null,isLoading:false,invoice:null})}}]);return e}();e.exports=i.createStore(l,"PlanChangePreviewStore")},"./src/main/webapp/universal/src/apps/App/shared/utils/ProductLineTransitionAPI.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@sqs/network/lib/index.js").default;var a="/api/billing/product-types/website/product-lines";var t={transition:function e(n,r){return s.post("".concat(a,"/").concat(n,"/transitions"),r)}};e.exports=t},"./src/main/webapp/universal/src/apps/App/shared/utils/billing/PlanChangePreviewApi.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/@sqs/network/lib/index.js").default;var a=r("./src/main/webapp/universal/src/shared/utils/SerializationUtils.js"),t=a.deserializer;var i=r("./src/main/webapp/universal/src/shared/utils/billing/deserializeInvoice.js");var o="/api/billing/plan-change-preview";var l=t(i,"data.invoice");var c={load:function e(n){return s.get(o,{params:n}).then(l)}};e.exports=c},"./src/main/webapp/universal/src/shared/utils/billing/PriceUtils.js":function(e,n,r){"use strict";var s=r("./common/temp/node_modules/lodash/find.js");var a=r("./src/main/webapp/universal/src/shared/utils/billing/BillingIntervalUtils.js");function t(e){return s(e,function(e){return a.isAnnual(e.billingPeriod)})}function i(e){return s(e,function(e){return a.isMonthly(e.billingPeriod)})}function o(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{code:"USD",symbol:"$"};false;if(!e&&0!==e)return"";var r=Math.round(e)!==e?2:0;var s=Math.abs(e)!==e?"-":"";var a="USD"===n.code?"":" "+n.code;e=Number(Math.abs(e)).toFixed(r);return s+n.symbol+e+a}e.exports={findAnnualPrice:t,formatPrice:o,findMonthlyPrice:i}}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/22-5c5956639cb88977fde1b-min.en-US.js.map