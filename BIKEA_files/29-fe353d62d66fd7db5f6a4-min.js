(window["wpJsonpExtractCss"]=window["wpJsonpExtractCss"]||[]).push([[29],{"./common/temp/node_modules/@sqs/utils/NodeCoordinatesTracker/index.js":function(e,t,o){"use strict";var r=o("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var n=r(o("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));var s=r(o("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var l=r(o("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}));o.push.apply(o,r)}return o}function a(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),true).forEach(function(e){(0,n["default"])(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}var c=o("./common/temp/node_modules/@sqs/utils/dom/findParent.js");var u=o("./common/temp/node_modules/@sqs/utils/style/getComputedStyle.js");var m=o("./common/temp/node_modules/@sqs/utils/scroll/isScrollableNode.js");var d=o("./common/temp/node_modules/@sqs/utils/events/parentScroll.js");var p=d.addScrollListenerToParents,f=d.removeScrollListenerFromParents;var v=function(){function o(e){(0,s["default"])(this,o);this.node=e;var t=this.scrollNode=this.getRelativeScrollNode(e);if(t){this.scrollListener=this.updateCoordsOnScroll.bind(this);p(t,this.scrollListener)}this.origCoords=this.getClientRect();this.coords=a({},this.origCoords)}(0,l["default"])(o,[{key:"destroy",value:function e(){if(this.scrollListener){f(this.scrollNode,this.scrollListener);this.scrollListener=null}this.scrollNode=null;this.node=null}},{key:"getRelativeScrollNode",value:function e(t){var o=u(t).position;if("fixed"===o)return null;if("absolute"===o)return c(t,function(e){return"BODY"===e.nodeName||m(e)},function(e){return"static"!==u(e).position})||t;return t}},{key:"getClientRect",value:function e(){if("HTML"===this.node.nodeName){var t=this.node.ownerDocument.defaultView;if(!t)return{top:0,left:0,right:0,bottom:0};return{top:0,left:0,right:t.innerWidth,bottom:t.innerHeight}}var o=this.node.getClientRects()[0];return{left:o.left,right:o.right,top:o.top,bottom:o.bottom}}},{key:"updateCoordsOnScroll",value:function e(t,o){var r=this.coords;r.left+=t;r.right+=t;r.top+=o;r.bottom+=o}},{key:"resetCoords",value:function e(){var t=this.scrollNode;this.scrollListener&&f(t,this.scrollListener);this.origCoords=this.getClientRect();this.coords=a({},this.origCoords);this.scrollListener&&p(t,this.scrollListener)}},{key:"getCoords",value:function e(){return a({},this.coords)}},{key:"getOffsets",value:function e(){var t=this.origCoords;var o=this.coords;return{left:o.left-t.left,right:o.right-t.right,top:o.top-t.top,bottom:o.bottom-t.bottom}}}]);return o}();e.exports=v},"./common/temp/node_modules/@sqs/utils/dom/findClosest.js":function(e,t,o){"use strict";var n=o("./common/temp/node_modules/@sqs/utils/dom/normalizeMatcher.js");var r=function e(t,o,r){o=n(o);r=n(r);while(t&&(!r||!r(t))){if(o(t))return t;t=t.parentElement}return null};e.exports=r},"./common/temp/node_modules/@sqs/utils/dom/findParent.js":function(e,t,o){"use strict";var n=o("./common/temp/node_modules/@sqs/utils/dom/findClosest.js");var r=function e(t,o,r){return t?n(t.parentElement,o,r):null};e.exports=r},"./common/temp/node_modules/@sqs/utils/dom/getParents.js":function(e,t,o){"use strict";var s=o("./common/temp/node_modules/@sqs/utils/dom/normalizeMatcher.js");var r=function e(t,o,r){o=s(o);r=s(r);t=t.parentElement;var n=[];while(t&&(!r||!r(t))){o&&!o(t)||n.push(t);t=t.parentElement}return n};e.exports=r},"./common/temp/node_modules/@sqs/utils/dom/normalizeMatcher.js":function(e,t,o){"use strict";var r=o("./common/temp/node_modules/matches-selector/index.js");var n=function e(t){if(t instanceof Node)return function(e){return e===t};if("string"===typeof t)return function(e){return r(e,t)};return t};e.exports=n},"./common/temp/node_modules/@sqs/utils/events/parentScroll.js":function(e,t,o){"use strict";var r=o("./common/temp/node_modules/@sqs/utils/events/scroll.js"),n=r.addScrollListener,s=r.removeScrollListener;var l=o("./common/temp/node_modules/@sqs/utils/scroll/getScrollParents.js");var i=new WeakMap;var a=function e(t,o,r){i.has(t)||i.set(t,l(t,false,r));i.get(t).forEach(function(e){n(e,o)})};var c=function e(t,o){i.has(t)&&i.get(t).forEach(function(e){s(e,o)})};e.exports={addScrollListenerToParents:a,removeScrollListenerFromParents:c}},"./common/temp/node_modules/@sqs/utils/events/scroll.js":function(e,t,o){"use strict";var s=o("./common/temp/node_modules/@sqs/utils/scroll/normalizeScrollEmitter.js");var l=o("./common/temp/node_modules/@sqs/utils/scroll/normalizeScrollSetter.js");var a=new WeakMap;var r=function e(t,o){if(a.has(t)){a.get(t).callbacks.push(o);return}var r=s(t);var n=l(t);var i={emitterNode:r,setterNode:n,listener:function e(t){var o=i.setterNode,r=o.scrollTop,n=o.scrollLeft;var s=i.scrollLeft-n;var l=i.scrollTop-r;i.scrollTop=r;i.scrollLeft=n;i.callbacks.forEach(function(e){return e(s,l,t)})},callbacks:[o],scrollTop:n.scrollTop,scrollLeft:n.scrollLeft};r.addEventListener("scroll",i.listener);a.set(t,i)};var n=function e(t,o){var r=a.get(t);if(!r)return;var n=r.callbacks,s=r.listener,l=r.emitterNode;var i=n.indexOf(o);i>-1&&n.splice(i,1);if(0===n.length){l.removeEventListener("scroll",s);a["delete"](t)}};e.exports={addScrollListener:r,removeScrollListener:n}},"./common/temp/node_modules/@sqs/utils/scroll/getScrollParents.js":function(e,t,o){"use strict";var s=o("./common/temp/node_modules/@sqs/utils/scroll/isScrollableNode.js");var l=o("./common/temp/node_modules/@sqs/utils/dom/getParents.js");var r=o("./common/temp/node_modules/@sqs/utils/dom/nodeTypes.js"),i=r.DOCUMENT;var n=function e(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n=[];o&&s(t,r)&&n.push(t);return n.concat(l(t,function(e){return s(e,r)},function(e){return e.nodeType===i}))};e.exports=n},"./common/temp/node_modules/@sqs/utils/scroll/isScrollableNode.js":function(e,t,o){"use strict";var m=o("./common/temp/node_modules/lodash/get.js");var d=o("./common/temp/node_modules/@sqs/utils/style/getComputedStyle.js");var p=o("./common/temp/node_modules/@sqs/utils/scroll/normalizeScrollSetter.js");var r="auto";var n="scroll";var s="visible";var f="HTML";var v=function e(t,o){return t===r||t===n||t===s&&o.nodeName===f};var l=function e(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!m(t,"ownerDocument.defaultView"))return false;var r=d(t),n=r.overflowX,s=r.overflowY;if(true===o)return v(s,t)||v(n,t);var l=p(t),i=l.scrollHeight,a=l.scrollWidth,c=l.clientHeight,u=l.clientWidth;if(t.nodeName===f){c=Math.min(c,t.ownerDocument.defaultView.innerHeight);u=Math.min(u,t.ownerDocument.defaultView.innerWidth)}return v(s,t)&&i>c||v(n,t)&&a>u};e.exports=l},"./common/temp/node_modules/@sqs/utils/scroll/normalizeScrollEmitter.js":function(e,t,o){"use strict";var r=function e(t){if(t&&"HTML"===t.nodeName)return t.ownerDocument;return t};e.exports=r},"./common/temp/node_modules/@sqs/utils/style/getComputedStyle.js":function(e,t,o){"use strict";var r=o("./common/temp/node_modules/lodash/get.js");var n=function e(t){var o=r(t,"ownerDocument.defaultView");return o?o.getComputedStyle(t):{}};e.exports=n},"./src/main/webapp/universal/src/shared/components/DragSelection.jsx":function(e,t,o){"use strict";var r=o("./common/temp/node_modules/@babel/runtime/helpers/interopRequireDefault.js");var d=r(o("./common/temp/node_modules/@babel/runtime/helpers/extends.js"));var p=r(o("./common/temp/node_modules/@babel/runtime/helpers/objectWithoutProperties.js"));var f=r(o("./common/temp/node_modules/@babel/runtime/helpers/slicedToArray.js"));var s=r(o("./common/temp/node_modules/@babel/runtime/helpers/classCallCheck.js"));var l=r(o("./common/temp/node_modules/@babel/runtime/helpers/createClass.js"));var i=r(o("./common/temp/node_modules/@babel/runtime/helpers/assertThisInitialized.js"));var a=r(o("./common/temp/node_modules/@babel/runtime/helpers/inherits.js"));var c=r(o("./common/temp/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"));var u=r(o("./common/temp/node_modules/@babel/runtime/helpers/getPrototypeOf.js"));var v=r(o("./common/temp/node_modules/@babel/runtime/helpers/defineProperty.js"));function m(n){var s=h();return function e(){var t=(0,u.default)(n),o;if(s){var r=(0,u.default)(this).constructor;o=Reflect.construct(t,arguments,r)}else o=t.apply(this,arguments);return(0,c.default)(this,o)}}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}var g=o("./common/temp/node_modules/@rush-temp/universal-frontend/node_modules/classnames/index.js");var n=o("./common/temp/node_modules/prop-types/index.js");var b=o("./common/temp/node_modules/react/index.js");var j=o("./common/temp/node_modules/@sqs/dnd/cjs/index.js"),y=j.DragTrigger;var C=o("./common/temp/node_modules/@sqs/utils/NodeCoordinatesTracker/index.js");var S=o("./common/temp/node_modules/@sqs/utils/number/clamp.js");var _=o("./common/temp/node_modules/@sqs/utils/events/parentScroll.js"),k=_.addScrollListenerToParents,D=_.removeScrollListenerFromParents;var x=o("./common/temp/node_modules/lodash/difference.js");var q=o("./common/temp/node_modules/lodash/throttle.js");var w=o("./src/main/webapp/universal/src/shared/components/DragSelection.less");var N=function e(t,o){return t.right>=o.left&&t.left<=o.right&&t.bottom>=o.top&&t.top<=o.bottom};var O=function(e){(0,a.default)(n,e);var r=m(n);function n(){var p;(0,s.default)(this,n);for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];p=r.call.apply(r,[this].concat(t));(0,v.default)((0,i.default)(p),"state",{isDragging:false,itemsMap:null,selectionCoords:null,selectedItemIndexes:[],mouseXY:null,anchorXY:null});(0,v.default)((0,i.default)(p),"onDrag",q(function(e){var t=e.mouseX,o=e.mouseY,r=e.maxX,n=e.maxY,s=e.minX,l=e.minY;var i=p.state,a=i.itemsMap,c=i.anchorXY;if(!a)return;var u=[S(t,s,r),S(o,l,n)];var m=p.calculateSelectionCoords(u,c);var d=p.getContainedOrIntersectedItems(m);p.setState({mouseXY:u,selectionCoords:m,selectedItemIndexes:d})},30));return p}(0,l.default)(n,[{key:"componentDidMount",value:function e(){this.coordsTracker=new C(this.refs.container)}},{key:"shouldComponentUpdate",value:function e(t,o){return this.state.isDragging!==o.isDragging||this.state.selectionCoords!==o.selectionCoords}},{key:"componentDidUpdate",value:function e(t,o){var r=this.state.isDragging;r&&this.fireSelectionChange(o.selectedItemIndexes)}},{key:"componentWillUnmount",value:function e(){var t=this.state,o=t.itemsMap,r=t.isDragging;o&&o.forEach(function(e){var t=e.coordsTracker;return t.destroy()});this.coordsTracker.destroy();this.coordsTracker=null;r&&D(this.refs.container,this.udpateCoordsOnScroll)}},{key:"fireSelectionChange",value:function e(t){var o=this.state.selectedItemIndexes;var r=this.props.items;var n=x(o,t);var s=x(t,o);(n.length>0||s.length>0)&&this.props.onSelectionChange({added:n.map(function(e){return r[e]}),removed:s.map(function(e){return r[e]})})}},{key:"udpateCoordsOnScroll",value:function e(t,o){var r=this.state,n=r.mouseXY,s=r.anchorXY;var l=[s[0]+t,s[1]+o];this.setState({anchorXY:l,selectionCoords:this.calculateSelectionCoords(n,l)})}},{key:"onDragStart",value:function e(t){var o=t.startX,r=t.startY;var n=this.props,s=n.items,l=n.itemNodesGetter,e=n.onDragStart;this.coordsTracker.resetCoords();k(this.refs.container,this.udpateCoordsOnScroll);this.setState({isDragging:true,selectionCoords:null,itemsMap:l(s).map(function(e,t){return{index:t,coordsTracker:new C(e)}}),anchorXY:[o,r],mouseXY:[o,r]});e&&e.apply(void 0,arguments)}},{key:"calculateSelectionCoords",value:function e(t,o){var r=(0,f.default)(t,2),n=r[0],s=r[1];var l=(0,f.default)(o,2),i=l[0],a=l[1];var c;var u;var m;var d;if(i<=n){m=i;d=n}else{m=n;d=i}if(a<=s){c=a;u=s}else{c=s;u=a}return{top:c,left:m,bottom:u,right:d}}},{key:"getContainedOrIntersectedItems",value:function e(r){var t=this.state.itemsMap;if(t)return t.filter(function(e){var t=e.index,o=e.coordsTracker;return N(o.getCoords(),r)}).map(function(e){var t=e.index;return t});return[]}},{key:"onDragEnd",value:function e(){var t=this.state,o=t.itemsMap,r=t.selectedItemIndexes;var n=this.props,e=n.onDragEnd,s=n.items;o&&o.forEach(function(e){var t=e.coordsTracker;return t.destroy()});D(this.refs.container,this.udpateCoordsOnScroll);this.setState({isDragging:false,itemsMap:null,selectedItemIndexes:[],mouseXY:null,anchorXY:null});e&&e.apply(void 0,[{selectedItems:r.map(function(e){return s[e]})}].concat(Array.prototype.slice.call(arguments)))}},{key:"getAbsolutePosition",value:function e(t){var o=this.coordsTracker.getCoords();return{top:t.top-o.top,left:t.left-o.left,bottom:o.bottom-t.bottom,right:o.right-t.right}}},{key:"render",value:function e(){var t=this;var o=this.state,r=o.isDragging,n=o.selectionCoords;var s=this.props,l=s.className,i=s.children,a=(0,p.default)(s,["className","children"]);delete a.items;delete a.itemNodesGetter;delete a.onSelectionChange;var c=g(w.container,l,(0,v.default)({},w.dragging,r));var u=g(w.selection,r&&w.visible);var m=n?this.getAbsolutePosition(n):null;return b.createElement(y,(0,d.default)({key:"trigger",constraint:function e(){return t.refs.container}},a,{onDragStart:this.onDragStart.bind(this),onDrag:this.onDrag.bind(this),onDragEnd:this.onDragEnd.bind(this),autoScroll:{vertical:true}}),b.createElement("div",{ref:"container",key:"container",className:c},i,b.createElement("div",{key:"selection",className:u,style:m})))}}]);return n}(b.Component);(0,v.default)(O,"propTypes",{items:n.array.isRequired,itemNodesGetter:n.func.isRequired,onSelectionChange:n.func,onDragStart:n.func,onDragEnd:n.func});(0,v.default)(O,"defaultProps",{itemNodesGetter:function e(){return[]},items:[],onSelectionChange:function e(){}});(0,v.default)(O,"itemClassName",w.item);e.exports=O},"./src/main/webapp/universal/src/shared/components/DragSelection.less":function(e,t,o){e.exports={container:"CBfkoN6-q",dragging:"_2sGNZUacU",selection:"_2js8tp1Mv",visible:"g3fgAkIJe",item:"_2EEHzalBf"}}}]);
//# sourceMappingURL=https://sourcemaps.squarespace.net/universal/scripts-compressed/29-296325172268514274934-min.en-US.js.map